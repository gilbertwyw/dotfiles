set nocompatible
" otherwise NERDTree shows strange character instead of arrows
set encoding=utf-8

syntax on
filetype off
set rtp+=~/dotfiles/vim/bundle/vundle/
call vundle#rc()

" Vundle, install to ~/.vim/bundle/
Bundle 'myusuf3/numbers.vim'
Bundle 'Lokaltog/vim-easymotion'
Bundle 'Valloric/YouCompleteMe'
Bundle 'airblade/vim-gitgutter'
Bundle 'bling/vim-airline'
Bundle 'editorconfig/editorconfig-vim'
Bundle 'gmarik/vundle'
Bundle 'junegunn/vim-easy-align'
Bundle 'kien/ctrlp.vim'
Bundle 'mattn/emmet-vim'
Bundle 'rking/ag.vim'
Bundle 'scrooloose/nerdcommenter'
Bundle 'scrooloose/nerdtree'
Bundle 'scrooloose/syntastic'
Bundle 'tpope/vim-fugitive'
Bundle 'tpope/vim-git'
Bundle 'tpope/vim-repeat'
Bundle 'tpope/vim-sensible'
Bundle 'tpope/vim-surround'
Bundle 'Yggdroot/indentLine'
Bundle 'kchmck/vim-coffee-script'

" syntax
Bundle 'digitaltoad/vim-jade'
Bundle 'othree/html5.vim'

" colorscheme
Bundle 'chriskempson/tomorrow-theme', {'rtp': 'vim/'}
Bundle "daylerees/colour-schemes", { "rtp": "vim-themes/" }

colorscheme Tomorrow-Night

filetype plugin indent on

let mapleader=","

" Quickly edit/reload the vimrc file
nmap <silent> <leader>ev :e $MYVIMRC<CR>
nmap <silent> <leader>sv :so $MYVIMRC<CR>

" hide buffer
set hidden

set number
" turn off backup for now

set nobackup
set noswapfile

" change the terminal's title
set title

set hlsearch

set ignorecase
set smartcase

" use soft tab
set expandtab
set tabstop=2
" number of space to use for autoindenting
set shiftwidth=2

" toggle paste mode 
set pastetoggle=<F2>

" enable mouse in all modes
set mouse=a

" cut down key stroke for normal mode
"nnoremap ; :

" Disable all arrow keys
noremap <Up> <NOP>
noremap <Down> <NOP>
noremap <Left> <NOP>
noremap <Right> <NOP>

" Easy window navigation
map <C-h> <C-w>h
map <C-j> <C-w>j
map <C-k> <C-w>k
map <C-l> <C-w>l

" git commit message
autocmd Filetype gitcommit spell textwidth=72

" turn on spell checking for markdown files
autocmd BufRead,BufNewFile *.md setlocal spell

" The Silver Searcher, http://robots.thoughtbot.com/faster-grepping-in-vim/
if executable('ag')
  " Use ag over grep
  set grepprg=ag\ --nogroup\ --nocolor

  " Use ag in CtrlP for listing files. Lightning fast and respects .gitignore
  let g:ctrlp_user_command = 'ag %s -l --nocolor -g ""'

  " ag is fast enough that CtrlP doesn't need to cache
  let g:ctrlp_use_caching = 0
endif

" bind K to grep word under cursor
nnoremap K :grep! "\b<C-R><C-W>\b"<CR>:cw<CR>

" ctrlp
let g:ctrlp_working_path_mode = 'ra'

" emmet-vim, enable just for html/css
let g:user_emmet_install_global = 0
autocmd FileType html,css EmmetInstall

" NERDTree
autocmd vimenter * if !argc() | NERDTree | endif
autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTreeType") && b:NERDTreeType == "primary") | q | endif
map <leader>n :NERDTreeToggle<CR>

" numbers.vim
nnoremap <F3> :NumbersToggle<CR>
nnoremap <F4> :NumbersOnOff<CR>

" vim-easy-align
" Start interactive EasyAlign in visual mode
vmap <Enter> <Plug>(EasyAlign)
" Start interactive EasyAlign with a Vim movement
nmap <Leader>a <Plug>(EasyAlign)

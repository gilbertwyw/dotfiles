set nocompatible
" otherwise NERDTree shows strange character instead of arrows
set encoding=utf-8

syntax on
filetype off
set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

" Vundle, install under ~/.vim/bundle/
Bundle 'Lokaltog/vim-easymotion'
Bundle 'SirVer/ultisnips'
" snippets; used with 'ultisnips' 
Bundle 'honza/vim-snippets'
Bundle 'Valloric/YouCompleteMe'
Bundle 'Valloric/MatchTagAlways'
Bundle 'Yggdroot/indentLine'
Bundle 'airblade/vim-gitgutter'
Bundle 'bling/vim-airline'
Bundle 'editorconfig/editorconfig-vim'
Bundle 'gmarik/vundle'
Bundle 'goldfeld/vim-seek'
Bundle 'junegunn/vim-easy-align'
Bundle 'junegunn/vim-emoji'
Bundle 'justinmk/vim-gtfo'
Bundle 'kien/ctrlp.vim'
Bundle 'myusuf3/numbers.vim'
Bundle 'Raimondi/delimitMate'
Bundle 'rking/ag.vim'
Bundle 'scrooloose/nerdcommenter'
Bundle 'scrooloose/nerdtree'
Bundle 'scrooloose/syntastic'
Bundle 'terryma/vim-multiple-cursors'
Bundle 'tommcdo/vim-exchange'
Bundle 'tpope/vim-repeat'
Bundle 'tpope/vim-sensible'
Bundle 'tpope/vim-surround'
" Git
Bundle 'tpope/vim-fugitive'
Bundle 'tpope/vim-git'
" Front-End
Bundle 'ap/vim-css-color'
Bundle 'digitaltoad/vim-jade'
Bundle 'maksimr/vim-jsbeautify'
Bundle 'mattn/emmet-vim'
Bundle 'othree/html5.vim'
" Javascript & Node.js
Bundle 'jelera/vim-javascript-syntax'
Bundle 'kchmck/vim-coffee-script'
Bundle 'marijnh/tern_for_vim'
Bundle 'moll/vim-node'
" colorscheme
Bundle 'chriskempson/tomorrow-theme', {'rtp': 'vim/'}
Bundle "daylerees/colour-schemes", { "rtp": "vim-themes/" }

colorscheme Tomorrow-Night

filetype plugin indent on

let mapleader=","

" ~/.vimrc
" *** The Right Hand system ***
" in INSERT mode, escape to NORMAL mode
inoremap ;l <Esc>
" in INSERT mode, save & back to NORMAL mode
inoremap ;k <Esc>:update<CR>
" in INSERT mode, save & back to INSERT mode
inoremap ;j <C-O>:update<CR>
" in NORMAL mode, save & back to NORMAL mode
nnoremap ;j :update<CR>

" Quickly edit/reload the vimrc file
nmap <silent> <leader>ev :e $MYVIMRC<CR>
nmap <silent> <leader>sv :so $MYVIMRC<CR>

" hide buffer
set hidden

set number

" turn off backup for now
set nobackup
set noswapfile

" change the terminal's title
set title

set hlsearch
set ignorecase
set smartcase

" use soft tab
set expandtab
set tabstop=2
" number of space to use for autoindenting
set shiftwidth=2

" toggle paste mode 
set pastetoggle=<F2>

" enable mouse in all modes
set mouse=a

" cut down key stroke for normal mode
"nnoremap ; :

" Disable all arrow keys
noremap <Up> <NOP>
noremap <Down> <NOP>
noremap <Left> <NOP>
noremap <Right> <NOP>

" Easy pane navigation
noremap <C-h> <C-w>h
noremap <C-j> <C-w>j
noremap <C-k> <C-w>k
noremap <C-l> <C-w>l

" git commit message
autocmd Filetype gitcommit setlocal spell textwidth=72

" turn on spell checking for markdown files
autocmd BufRead,BufNewFile *.md setlocal spell

" turn off search highlight
nnoremap <silent> <leader><space> :noh<CR>

" The Silver Searcher, http://robots.thoughtbot.com/faster-grepping-in-vim/
if executable('ag')
  " Use ag over grep
  set grepprg=ag\ --nogroup\ --nocolor

  " Use ag in CtrlP for listing files. Lightning fast and respects .gitignore
  let g:ctrlp_user_command = 'ag %s -l --nocolor -g ""'

  " ag is fast enough that CtrlP doesn't need to cache
  let g:ctrlp_use_caching = 0
endif

" bind K to grep word under cursor
nnoremap K :grep! "\b<C-R><C-W>\b"<CR>:cw<CR>

" ctrlp
let g:ctrlp_working_path_mode = 'ra'

" emmet-vim, enable just for html/css
let g:user_emmet_install_global = 0
autocmd FileType html,css EmmetInstall

" NERDTree
autocmd vimenter * if !argc() | NERDTree | endif
autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTreeType") && b:NERDTreeType == "primary") | q | endif

" NERDTree mirror mode by default
map <silent> <leader>n :NERDTreeToggle<CR> :NERDTreeMirror<CR>

let NERDTreeIgnore=['\.sublime-*']

" numbers.vim
nnoremap <F3> :NumbersToggle<CR>
nnoremap <F4> :NumbersOnOff<CR>

" vim-easy-align
" Start interactive EasyAlign in visual mode
vmap <Enter> <Plug>(EasyAlign)
" Start interactive EasyAlign with a Vim movement
nmap <Leader>a <Plug>(EasyAlign)

" vim-jsbeautify
autocmd FileType javascript noremap <buffer>  <c-f> :call JsBeautify()<cr>
autocmd FileType html noremap <buffer> <c-f> :call HtmlBeautify()<cr>
autocmd FileType css noremap <buffer> <c-f> :call CSSBeautify()<cr>
autocmd FileType javascript vnoremap <buffer>  <c-f> :call RangeJsBeautify()<cr>
autocmd FileType html vnoremap <buffer> <c-f> :call RangeHtmlBeautify()<cr>
autocmd FileType css vnoremap <buffer> <c-f> :call RangeCSSBeautify()<cr>

" tern_for_vim
let g:tern_show_argument_hints='on_hold'
nmap <Leader>tD :TernDoc<cr>
nmap <Leader>tb :TernDocBrowse<cr>
nmap <Leader>td :TernDef<cr>
nmap <Leader>tr :TernRefs<cr>
nmap <Leader>tR :TernRename<cr>

" enable code folding by "vim-javascript-syntax'
au FileType javascript call JavaScriptFold()

" to avoid conflict with YouCompleteMe
set rtp+=~/dotfiles/vim/
let g:UltiSnipsEditSplit="vertical"
let g:UltiSnipsExpandTrigger="<c-j>"
let g:UltiSnipsSnippetsDir="~/dotfiles/vim/snips/"
let g:UltiSnipsSnippetDirectories=["UltiSnips", "snips"]
" vim-emoji
"   - enable only when editing Markdown files
"   - trigger by CTRL-X CTRL-U in INSERT mode with terminal vim
augroup emoji_complete
  autocmd!
  autocmd FileType markdown setlocal completefunc=emoji#complete
augroup END

" Using Emojis as Git Gutter symbols, work only with terminal vim(?)
silent! if emoji#available()
  let g:gitgutter_sign_added = emoji#for('small_blue_diamond')
  let g:gitgutter_sign_modified = emoji#for('small_orange_diamond')
  let g:gitgutter_sign_removed = emoji#for('small_red_triangle')
  let g:gitgutter_sign_modified_removed = emoji#for('collision')
endif

" SHIFT + direction to change tab
noremap <S-l> gt
noremap <S-h> gT
